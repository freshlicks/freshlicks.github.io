async function getData(stre, idx) {
  try {
    String(stre).padStart(4, "0");
    const response = await fetch(
      "https://apionline.homedepot.com/federation-gateway/graphql?opname=searchModel",
      {
        headers: {
          accept: "*/*",
          "accept-language": "en-US,en;q=0.9",
          "content-type": "application/json",
          priority: "u=1, i",
          "sec-ch-ua":
            '"Chromium";v="134", "Not:A-Brand";v="24", "Microsoft Edge";v="134"',
          "sec-ch-ua-mobile": "?0",
          "sec-ch-ua-platform": '"Windows"',
          "sec-fetch-dest": "empty",
          "sec-fetch-mode": "cors",
          "sec-fetch-site": "same-site",
          "x-api-cookies":
            '{"x-user-id":"fb219304-841c-5d7b-46a8-59dce862bbec"}',
          "x-cloud-trace-context": "bedccf40bfb344c6a68a291356808be0/6;o=1",
          "x-current-url":
            "/b/Tools-Power-Tools/Pick-Up-Today/N-5yc1vZc298Z1z175a5",
          "x-debug": "false",
          "x-experience-name": "general-merchandise",
          "x-hd-dc": "origin",
          "x-parent-trace-id":
            "376416e756b9d5b7bf1165ea23f15c6b/5564728038591670922",
          "x-thd-customer-token": "",
        },
        referrer: "https://www.homedepot.com/",
        referrerPolicy: "strict-origin-when-cross-origin",
        body:
          '{"operationName":"searchModel","variables":{"skipInstallServices":false,"skipFavoriteCount":false,"storefilter":"IN_STORE","channel":"DESKTOP","skipDiscoveryZones":false,"skipBuyitagain":true,"additionalSearchParams":{"sponsored":false,"mcvisId":"63193502651377838892577755275215838391","deliveryZip":"72117","plp":true,"multiStoreIds":[]},"filter":{},"isBrandPricingPolicyCompliant":false,"navParam":"5yc1vZc298Z1z175a5","orderBy":{"field":"TOP_SELLERS","order":"ASC"},"pageSize":48,"startIndex":' +
          idx +
          ',"storeId":"' +
          stre +
          '"},"query":"query searchModel($storeId: String, $zipCode: String, $skipInstallServices: Boolean = true, $startIndex: Int, $pageSize: Int, $orderBy: ProductSort, $filter: ProductFilter, $isBrandPricingPolicyCompliant: Boolean, $skipFavoriteCount: Boolean = false, $keyword: String, $navParam: String, $storefilter: StoreFilter = ALL, $channel: Channel = DESKTOP, $additionalSearchParams: AdditionalParams, $loyaltyMembershipInput: LoyaltyMembershipInput, $dataSource: String, $skipDiscoveryZones: Boolean = true, $skipBuyitagain: Boolean = true) {\\n  searchModel(\\n    keyword: $keyword\\n    navParam: $navParam\\n    storefilter: $storefilter\\n    isBrandPricingPolicyCompliant: $isBrandPricingPolicyCompliant\\n    storeId: $storeId\\n    channel: $channel\\n    additionalSearchParams: $additionalSearchParams\\n    loyaltyMembershipInput: $loyaltyMembershipInput\\n  ) {\\n    metadata {\\n      hasPLPBanner\\n      categoryID\\n      analytics {\\n        semanticTokens\\n        dynamicLCA\\n        __typename\\n      }\\n      canonicalUrl\\n      searchRedirect\\n      clearAllRefinementsURL\\n      contentType\\n      h1Tag\\n      isStoreDisplay\\n      productCount {\\n        inStore\\n        __typename\\n      }\\n      stores {\\n        storeId\\n        storeName\\n        address {\\n          postalCode\\n          __typename\\n        }\\n        nearByStores {\\n          storeId\\n          storeName\\n          distance\\n          address {\\n            postalCode\\n            __typename\\n          }\\n          __typename\\n        }\\n        __typename\\n      }\\n      __typename\\n    }\\n    products(\\n      startIndex: $startIndex\\n      pageSize: $pageSize\\n      orderBy: $orderBy\\n      filter: $filter\\n    ) {\\n      identifiers {\\n        storeSkuNumber\\n        specialOrderSku\\n        canonicalUrl\\n        brandName\\n        itemId\\n        productLabel\\n        productType\\n        parentId\\n        modelNumber\\n        isSuperSku\\n        sampleId\\n        __typename\\n      }\\n      installServices(storeId: $storeId, zipCode: $zipCode) @skip(if: $skipInstallServices) {\\n        scheduleAMeasure\\n        gccCarpetDesignAndOrderEligible\\n        __typename\\n      }\\n      info {\\n        sponsoredMetadata {\\n          sponsoredId\\n          trackSource\\n          campaignId\\n          placementId\\n          slotId\\n          __typename\\n        }\\n        sponsoredBeacon {\\n          onClickBeacons\\n          onViewBeacons\\n          onClickBeacon\\n          onViewBeacon\\n          __typename\\n        }\\n        isSponsored\\n        productSubType {\\n          name\\n          link\\n          __typename\\n        }\\n        augmentedReality\\n        globalCustomConfigurator {\\n          customExperience\\n          __typename\\n        }\\n        hidePrice\\n        ecoRebate\\n        quantityLimit\\n        categoryHierarchy\\n        sskMin\\n        sskMax\\n        unitOfMeasureCoverage\\n        wasMaxPriceRange\\n        wasMinPriceRange\\n        swatches {\\n          isSelected\\n          itemId\\n          label\\n          swatchImgUrl\\n          url\\n          value\\n          __typename\\n        }\\n        totalNumberOfOptions\\n        customerSignal {\\n          previouslyPurchased\\n          __typename\\n        }\\n        isBuryProduct\\n        isGenericProduct\\n        returnable\\n        samplesAvailable\\n        isLiveGoodsProduct\\n        classNumber\\n        hasSubscription\\n        productDepartment\\n        __typename\\n      }\\n      itemId\\n      dataSources\\n      media {\\n        images {\\n          url\\n          type\\n          subType\\n          sizes\\n          __typename\\n        }\\n        __typename\\n      }\\n      pricing(\\n        storeId: $storeId\\n        isBrandPricingPolicyCompliant: $isBrandPricingPolicyCompliant\\n      ) {\\n        value\\n        original\\n        preferredPriceFlag\\n        promotion {\\n          dates {\\n            start\\n            end\\n            __typename\\n          }\\n          description {\\n            shortDesc\\n            longDesc\\n            __typename\\n          }\\n          experienceTag\\n          subExperienceTag\\n          type\\n          dollarOff\\n          percentageOff\\n          promotionTag\\n          savingsCenter\\n          savingsCenterPromos\\n          specialBuySavings\\n          specialBuyDollarOff\\n          specialBuyPercentageOff\\n          __typename\\n        }\\n        conditionalPromotions {\\n          promotionId\\n          skuItemGroup\\n          promotionTags\\n          eligibilityCriteria {\\n            itemGroup\\n            minThresholdVal\\n            thresholdType\\n            __typename\\n          }\\n          reward {\\n            tiers {\\n              minThresholdVal\\n              thresholdType\\n              rewardVal\\n              rewardType\\n              rewardLevel\\n              maxAllowedRewardAmount\\n              __typename\\n            }\\n            __typename\\n          }\\n          __typename\\n        }\\n        alternatePriceDisplay\\n        alternate {\\n          bulk {\\n            pricePerUnit\\n            thresholdQuantity\\n            value\\n            __typename\\n          }\\n          unit {\\n            caseUnitOfMeasure\\n            unitsOriginalPrice\\n            unitsPerCase\\n            value\\n            __typename\\n          }\\n          __typename\\n        }\\n        mapAboveOriginalPrice\\n        mapDetail {\\n          percentageOff\\n          dollarOff\\n          mapPolicy\\n          mapOriginalPriceViolation\\n          mapSpecialPriceViolation\\n          __typename\\n        }\\n        message\\n        specialBuy\\n        unitOfMeasure\\n        clearance {\\n          value\\n          dollarOff\\n          percentageOff\\n          unitsClearancePrice\\n          __typename\\n        }\\n        __typename\\n      }\\n      reviews {\\n        ratingsReviews {\\n          averageRating\\n          totalReviews\\n          __typename\\n        }\\n        __typename\\n      }\\n      badges(storeId: $storeId) {\\n        name\\n        label\\n        __typename\\n      }\\n      dataSource\\n      favoriteDetail @skip(if: $skipFavoriteCount) {\\n        count\\n        __typename\\n      }\\n      taxonomy {\\n        breadCrumbs {\\n          label\\n          __typename\\n        }\\n        __typename\\n      }\\n      details {\\n        installation {\\n          serviceType\\n          __typename\\n        }\\n        collection {\\n          name\\n          url\\n          __typename\\n        }\\n        __typename\\n      }\\n      fulfillment(storeId: $storeId, zipCode: $zipCode) {\\n        anchorStoreStatus\\n        anchorStoreStatusType\\n        backordered\\n        backorderedShipDate\\n        bossExcludedShipStates\\n        excludedShipStates\\n        seasonStatusEligible\\n        fulfillmentOptions {\\n          type\\n          fulfillable\\n          services {\\n            deliveryTimeline\\n            deliveryDates {\\n              startDate\\n              endDate\\n              __typename\\n            }\\n            deliveryCharge\\n            dynamicEta {\\n              hours\\n              minutes\\n              __typename\\n            }\\n            hasFreeShipping\\n            freeDeliveryThreshold\\n            locations {\\n              curbsidePickupFlag\\n              isBuyInStoreCheckNearBy\\n              distance\\n              inventory {\\n                isOutOfStock\\n                isInStock\\n                isLimitedQuantity\\n                isUnavailable\\n                quantity\\n                maxAllowedBopisQty\\n                minAllowedBopisQty\\n                __typename\\n              }\\n              isAnchor\\n              locationId\\n              state\\n              storeName\\n              storePhone\\n              type\\n              __typename\\n            }\\n            type\\n            totalCharge\\n            earliestDeliveryDate\\n            deliveryMessage\\n            __typename\\n          }\\n          __typename\\n        }\\n        onlineStoreStatus\\n        onlineStoreStatusType\\n        fulfillmentBundleMessage\\n        __typename\\n      }\\n      availabilityType {\\n        type\\n        discontinued\\n        buyable\\n        status\\n        __typename\\n      }\\n      bundleFlag\\n      specificationGroup {\\n        specifications {\\n          specName\\n          specValue\\n          __typename\\n        }\\n        specTitle\\n        __typename\\n      }\\n      bundleItems {\\n        id\\n        quantity\\n        __typename\\n      }\\n      __typename\\n    }\\n    id\\n    searchReport {\\n      totalProducts\\n      didYouMean\\n      correctedKeyword\\n      keyword\\n      pageSize\\n      searchUrl\\n      sortBy\\n      sortOrder\\n      startIndex\\n      __typename\\n    }\\n    relatedResults {\\n      universalSearch {\\n        title\\n        __typename\\n      }\\n      relatedServices {\\n        label\\n        __typename\\n      }\\n      visualNavs {\\n        label\\n        imageId\\n        webUrl\\n        categoryId\\n        imageURL\\n        __typename\\n      }\\n      visualNavContainsEvents\\n      relatedKeywords {\\n        keyword\\n        __typename\\n      }\\n      __typename\\n    }\\n    taxonomy {\\n      brandLinkUrl\\n      breadCrumbs {\\n        browseUrl\\n        creativeIconUrl\\n        deselectUrl\\n        dimensionId\\n        dimensionName\\n        label\\n        refinementKey\\n        url\\n        __typename\\n      }\\n      __typename\\n    }\\n    templates\\n    discoveryZones @skip(if: $skipDiscoveryZones) {\\n      products(dataSource: $dataSource) {\\n        itemId\\n        dataSources\\n        badges(storeId: $storeId) {\\n          name\\n          __typename\\n        }\\n        info {\\n          isSponsored\\n          sponsoredMetadata {\\n            campaignId\\n            placementId\\n            slotId\\n            sponsoredId\\n            trackSource\\n            __typename\\n          }\\n          sponsoredBeacon {\\n            onClickBeacon\\n            onViewBeacon\\n            onClickBeacons\\n            onViewBeacons\\n            __typename\\n          }\\n          productSubType {\\n            name\\n            __typename\\n          }\\n          augmentedReality\\n          globalCustomConfigurator {\\n            customExperience\\n            __typename\\n          }\\n          swatches {\\n            isSelected\\n            itemId\\n            label\\n            swatchImgUrl\\n            url\\n            value\\n            __typename\\n          }\\n          totalNumberOfOptions\\n          hidePrice\\n          ecoRebate\\n          quantityLimit\\n          categoryHierarchy\\n          sskMin\\n          sskMax\\n          unitOfMeasureCoverage\\n          wasMaxPriceRange\\n          wasMinPriceRange\\n          __typename\\n        }\\n        identifiers {\\n          canonicalUrl\\n          productType\\n          productLabel\\n          modelNumber\\n          storeSkuNumber\\n          itemId\\n          brandName\\n          parentId\\n          __typename\\n        }\\n        media {\\n          images {\\n            url\\n            type\\n            subType\\n            sizes\\n            __typename\\n          }\\n          __typename\\n        }\\n        dataSource\\n        details {\\n          collection {\\n            name\\n            url\\n            __typename\\n          }\\n          __typename\\n        }\\n        pricing(\\n          storeId: $storeId\\n          isBrandPricingPolicyCompliant: $isBrandPricingPolicyCompliant\\n        ) {\\n          alternatePriceDisplay\\n          alternate {\\n            bulk {\\n              pricePerUnit\\n              thresholdQuantity\\n              value\\n              __typename\\n            }\\n            unit {\\n              caseUnitOfMeasure\\n              unitsOriginalPrice\\n              unitsPerCase\\n              value\\n              __typename\\n            }\\n            __typename\\n          }\\n          original\\n          mapAboveOriginalPrice\\n          mapDetail {\\n            percentageOff\\n            dollarOff\\n            mapPolicy\\n            mapOriginalPriceViolation\\n            mapSpecialPriceViolation\\n            __typename\\n          }\\n          message\\n          preferredPriceFlag\\n          promotion {\\n            type\\n            description {\\n              shortDesc\\n              longDesc\\n              __typename\\n            }\\n            dollarOff\\n            percentageOff\\n            promotionTag\\n            savingsCenter\\n            savingsCenterPromos\\n            specialBuySavings\\n            specialBuyDollarOff\\n            specialBuyPercentageOff\\n            __typename\\n          }\\n          specialBuy\\n          unitOfMeasure\\n          value\\n          __typename\\n        }\\n        taxonomy {\\n          breadCrumbs {\\n            label\\n            __typename\\n          }\\n          __typename\\n        }\\n        reviews {\\n          ratingsReviews {\\n            averageRating\\n            totalReviews\\n            __typename\\n          }\\n          __typename\\n        }\\n        __typename\\n      }\\n      metadata {\\n        zone\\n        zoneTitle\\n        __typename\\n      }\\n      __typename\\n    }\\n    partialTemplates\\n    dimensions {\\n      label\\n      refinements {\\n        refinementKey\\n        url\\n        label\\n        recordCount\\n        selected\\n        imgUrl\\n        nestedRefinements {\\n          label\\n          url\\n          recordCount\\n          refinementKey\\n          __typename\\n        }\\n        __typename\\n      }\\n      collapse\\n      dimensionId\\n      isVisualNav\\n      isVisualDimension\\n      isNumericFilter\\n      isColorSwatch\\n      nestedRefinementsLimit\\n      visualNavSequence\\n      __typename\\n    }\\n    orangeGraph {\\n      universalSearchArray {\\n        pods {\\n          title\\n          description\\n          imageUrl\\n          link\\n          isProContent\\n          recordType\\n          __typename\\n        }\\n        info {\\n          title\\n          __typename\\n        }\\n        __typename\\n      }\\n      productTypes\\n      intents\\n      orderNumber\\n      __typename\\n    }\\n    appliedDimensions {\\n      label\\n      refinements {\\n        label\\n        refinementKey\\n        url\\n        __typename\\n      }\\n      isNumericFilter\\n      __typename\\n    }\\n    primaryFilters {\\n      collapse\\n      dimensionId\\n      isVisualNav\\n      isVisualDimension\\n      isNumericFilter\\n      isColorSwatch\\n      label\\n      nestedRefinementsLimit\\n      refinements {\\n        label\\n        refinementKey\\n        recordCount\\n        selected\\n        imgUrl\\n        url\\n        nestedRefinements {\\n          label\\n          url\\n          recordCount\\n          refinementKey\\n          __typename\\n        }\\n        __typename\\n      }\\n      visualNavSequence\\n      __typename\\n    }\\n    buyitagain(dataSource: $dataSource) @skip(if: $skipBuyitagain) {\\n      itemId\\n      dataSources\\n      badges(storeId: $storeId) {\\n        name\\n        __typename\\n      }\\n      info {\\n        isSponsored\\n        sponsoredMetadata {\\n          campaignId\\n          placementId\\n          slotId\\n          sponsoredId\\n          trackSource\\n          __typename\\n        }\\n        sponsoredBeacon {\\n          onClickBeacon\\n          onViewBeacon\\n          onClickBeacons\\n          onViewBeacons\\n          __typename\\n        }\\n        productSubType {\\n          name\\n          link\\n          __typename\\n        }\\n        augmentedReality\\n        globalCustomConfigurator {\\n          customExperience\\n          __typename\\n        }\\n        customerSignal {\\n          previouslyPurchased\\n          __typename\\n        }\\n        isBuryProduct\\n        isGenericProduct\\n        returnable\\n        hidePrice\\n        ecoRebate\\n        quantityLimit\\n        categoryHierarchy\\n        sskMin\\n        sskMax\\n        unitOfMeasureCoverage\\n        wasMaxPriceRange\\n        wasMinPriceRange\\n        __typename\\n      }\\n      identifiers {\\n        canonicalUrl\\n        productType\\n        productLabel\\n        modelNumber\\n        storeSkuNumber\\n        itemId\\n        brandName\\n        specialOrderSku\\n        __typename\\n      }\\n      media {\\n        images {\\n          url\\n          type\\n          subType\\n          sizes\\n          __typename\\n        }\\n        __typename\\n      }\\n      details {\\n        installation {\\n          serviceType\\n          __typename\\n        }\\n        collection {\\n          name\\n          url\\n          __typename\\n        }\\n        __typename\\n      }\\n      fulfillment(storeId: $storeId, zipCode: $zipCode) {\\n        anchorStoreStatus\\n        anchorStoreStatusType\\n        backordered\\n        backorderedShipDate\\n        bossExcludedShipStates\\n        excludedShipStates\\n        seasonStatusEligible\\n        fulfillmentOptions {\\n          type\\n          fulfillable\\n          services {\\n            deliveryTimeline\\n            deliveryDates {\\n              startDate\\n              endDate\\n              __typename\\n            }\\n            deliveryCharge\\n            dynamicEta {\\n              hours\\n              minutes\\n              __typename\\n            }\\n            hasFreeShipping\\n            freeDeliveryThreshold\\n            locations {\\n              curbsidePickupFlag\\n              isBuyInStoreCheckNearBy\\n              distance\\n              inventory {\\n                isOutOfStock\\n                isInStock\\n                isLimitedQuantity\\n                isUnavailable\\n                quantity\\n                maxAllowedBopisQty\\n                minAllowedBopisQty\\n                __typename\\n              }\\n              isAnchor\\n              locationId\\n              state\\n              storeName\\n              storePhone\\n              type\\n              __typename\\n            }\\n            type\\n            totalCharge\\n            __typename\\n          }\\n          __typename\\n        }\\n        onlineStoreStatus\\n        onlineStoreStatusType\\n        __typename\\n      }\\n      installServices(storeId: $storeId, zipCode: $zipCode) @skip(if: $skipInstallServices) {\\n        scheduleAMeasure\\n        gccCarpetDesignAndOrderEligible\\n        __typename\\n      }\\n      taxonomy {\\n        breadCrumbs {\\n          label\\n          __typename\\n        }\\n        __typename\\n      }\\n      pricing(\\n        storeId: $storeId\\n        isBrandPricingPolicyCompliant: $isBrandPricingPolicyCompliant\\n      ) {\\n        alternatePriceDisplay\\n        alternate {\\n          bulk {\\n            pricePerUnit\\n            thresholdQuantity\\n            value\\n            __typename\\n          }\\n          unit {\\n            caseUnitOfMeasure\\n            unitsOriginalPrice\\n            unitsPerCase\\n            value\\n            __typename\\n          }\\n          __typename\\n        }\\n        original\\n        mapAboveOriginalPrice\\n        mapDetail {\\n          percentageOff\\n          dollarOff\\n          mapPolicy\\n          mapOriginalPriceViolation\\n          mapSpecialPriceViolation\\n          __typename\\n        }\\n        message\\n        preferredPriceFlag\\n        promotion {\\n          type\\n          description {\\n            shortDesc\\n            longDesc\\n            __typename\\n          }\\n          dollarOff\\n          percentageOff\\n          promotionTag\\n          savingsCenter\\n          savingsCenterPromos\\n          specialBuySavings\\n          specialBuyDollarOff\\n          specialBuyPercentageOff\\n          __typename\\n        }\\n        specialBuy\\n        unitOfMeasure\\n        value\\n        __typename\\n      }\\n      dataSource\\n      __typename\\n    }\\n    __typename\\n  }\\n}"}',
        method: "POST",
        mode: "no-cors",
        credentials: "include",
      }
    );
    if (!response.ok) {
      throw new Error(`Response status: ${response.status}`);
    }

    const json = await response.json();
    const currentDate = new Date();
    if (json.data.searchModel) {
      // if(idx==0)
      // {
      //   console.log("Store: "+json.data.searchModel.metadata.stores.storeId + " - "+json.data.searchModel.metadata.stores.storeName + " on " + currentDate);
      // }

      for (const value of json.data.searchModel.products) {
        if (
          value.pricing.clearance != null &&
          value.pricing.clearance.percentageOff > 39 &&
          value.fulfillment.fulfillmentOptions[0].services[0].locations[0]
            .inventory.quantity != 0 &&
          value.info.isSponsored == null
        ) {
          //           console.log("");
          // //          console.log("Store:"+json.data.searchModel.metadata.stores.storeId + "-"+json.data.searchModel.metadata.stores.storeName );
          //           console.log("Item Brand: "+value.identifiers.brandName);
          //           console.log("Item Name: "+value.identifiers.productLabel);
          //           console.log("Model Number: "+value.identifiers.modelNumber);
          //           console.log("Store SKU Number: "+value.identifiers.storeSkuNumber);
          //           console.log("Regular Price: $"+value.pricing.value);
          //           console.log("Clearance Price: $"+value.pricing.clearance.value);
          //           console.log("Quantity: "+value.fulfillment.fulfillmentOptions[0].services[0].locations[0].inventory.quantity);
          //           console.log("");

          //         }

          const data = {
            StoreID: json.data.searchModel.metadata.stores.storeId,
            StoreName: json.data.searchModel.metadata.stores.storeName,
            ItemBrand: value.identifiers.brandName,
            ItemName: value.identifiers.productLabel,
            ModelNumber: value.identifiers.modelNumber,
            StoreSKUNumber: value.identifiers.storeSkuNumber,
            RegularPrice: value.pricing.value,
            ClearancePrice: value.pricing.clearance.value,
            Quantity:
              value.fulfillment.fulfillmentOptions[0].services[0].locations[0]
                .inventory.quantity,
          };

          const jsonResponse = JSON.stringify(data);
          console.log(jsonResponse);
        }
      }

      const pgsize = await json.data.searchModel.searchReport.pageSize;
      if (pgsize > 0) {
        idx = idx + pgsize;
        await getData(stre, idx);
      }
    }
  } catch (error) {
    console.error(error.message);
  }
}

async function getData1(stre, idx) {
  try {
    String(stre).padStart(4, "0");
    const response = await fetch(
      "https://apionline.homedepot.com/federation-gateway/graphql?opname=searchModel",
      {
        headers: {
          accept: "*/*",
          "accept-language": "en-US",
          "content-type": "application/json",
          priority: "u=1, i",
          "sec-ch-ua": '"Not:A-Brand";v="24", "Chromium";v="134"',
          "sec-ch-ua-mobile": "?0",
          "sec-ch-ua-platform": '"Windows"',
          "sec-fetch-dest": "empty",
          "sec-fetch-mode": "cors",
          "sec-fetch-site": "same-site",
          "x-api-cookies":
            '{"x-user-id":"22671d35-33c6-de5c-cf42-0d6535a9fd0a"}',
          "x-cloud-trace-context": "48a6d6bbc40747169c25da7d74e06f4a/1;o=1",
          "x-current-url":
            "/b/Outdoors-Outdoor-Power-Equipment/Pick-Up-Today/N-5yc1vZbx5cZ1z175a5",
          "x-debug": "false",
          "x-experience-name": "general-merchandise",
          "x-hd-dc": "origin",
          "x-parent-trace-id":
            "393d1737f7ce9cda8d4bcf3414d821bb/11236997295759941785",
          "x-thd-customer-token": "",
        },
        referrer: "https://www.homedepot.com/",
        referrerPolicy: "strict-origin-when-cross-origin",
        body:
          '{"operationName":"searchModel","variables":{"skipInstallServices":false,"skipFavoriteCount":false,"storefilter":"IN_STORE","channel":"DESKTOP","skipDiscoveryZones":false,"skipBuyitagain":true,"additionalSearchParams":{"sponsored":false,"mcvisId":"53290662800970418914251114330328680399","deliveryZip":"72211","plp":true,"multiStoreIds":[]},"filter":{},"isBrandPricingPolicyCompliant":false,"navParam":"5yc1vZbx5cZ1z175a5","orderBy":{"field":"TOP_SELLERS","order":"ASC"},"pageSize":48,"startIndex":' +
          idx +
          ',"storeId":"' +
          stre +
          '"},"query":"query searchModel($storeId: String, $zipCode: String, $skipInstallServices: Boolean = true, $startIndex: Int, $pageSize: Int, $orderBy: ProductSort, $filter: ProductFilter, $isBrandPricingPolicyCompliant: Boolean, $skipFavoriteCount: Boolean = false, $keyword: String, $navParam: String, $storefilter: StoreFilter = ALL, $channel: Channel = DESKTOP, $additionalSearchParams: AdditionalParams, $loyaltyMembershipInput: LoyaltyMembershipInput, $dataSource: String, $skipDiscoveryZones: Boolean = true, $skipBuyitagain: Boolean = true) {\\n  searchModel(\\n    keyword: $keyword\\n    navParam: $navParam\\n    storefilter: $storefilter\\n    isBrandPricingPolicyCompliant: $isBrandPricingPolicyCompliant\\n    storeId: $storeId\\n    channel: $channel\\n    additionalSearchParams: $additionalSearchParams\\n    loyaltyMembershipInput: $loyaltyMembershipInput\\n  ) {\\n    metadata {\\n      hasPLPBanner\\n      categoryID\\n      analytics {\\n        semanticTokens\\n        dynamicLCA\\n        __typename\\n      }\\n      canonicalUrl\\n      searchRedirect\\n      clearAllRefinementsURL\\n      contentType\\n      h1Tag\\n      isStoreDisplay\\n      productCount {\\n        inStore\\n        __typename\\n      }\\n      stores {\\n        storeId\\n        storeName\\n        address {\\n          postalCode\\n          __typename\\n        }\\n        nearByStores {\\n          storeId\\n          storeName\\n          distance\\n          address {\\n            postalCode\\n            __typename\\n          }\\n          __typename\\n        }\\n        __typename\\n      }\\n      __typename\\n    }\\n    products(\\n      startIndex: $startIndex\\n      pageSize: $pageSize\\n      orderBy: $orderBy\\n      filter: $filter\\n    ) {\\n      identifiers {\\n        storeSkuNumber\\n        specialOrderSku\\n        canonicalUrl\\n        brandName\\n        itemId\\n        productLabel\\n        productType\\n        parentId\\n        modelNumber\\n        isSuperSku\\n        sampleId\\n        __typename\\n      }\\n      installServices(storeId: $storeId, zipCode: $zipCode) @skip(if: $skipInstallServices) {\\n        scheduleAMeasure\\n        gccCarpetDesignAndOrderEligible\\n        __typename\\n      }\\n      info {\\n        sponsoredMetadata {\\n          sponsoredId\\n          trackSource\\n          campaignId\\n          placementId\\n          slotId\\n          __typename\\n        }\\n        sponsoredBeacon {\\n          onClickBeacons\\n          onViewBeacons\\n          onClickBeacon\\n          onViewBeacon\\n          __typename\\n        }\\n        isSponsored\\n        productSubType {\\n          name\\n          link\\n          __typename\\n        }\\n        augmentedReality\\n        globalCustomConfigurator {\\n          customExperience\\n          __typename\\n        }\\n        hidePrice\\n        ecoRebate\\n        quantityLimit\\n        categoryHierarchy\\n        sskMin\\n        sskMax\\n        unitOfMeasureCoverage\\n        wasMaxPriceRange\\n        wasMinPriceRange\\n        swatches {\\n          isSelected\\n          itemId\\n          label\\n          swatchImgUrl\\n          url\\n          value\\n          __typename\\n        }\\n        totalNumberOfOptions\\n        customerSignal {\\n          previouslyPurchased\\n          __typename\\n        }\\n        isBuryProduct\\n        isGenericProduct\\n        returnable\\n        samplesAvailable\\n        isLiveGoodsProduct\\n        classNumber\\n        hasSubscription\\n        productDepartment\\n        __typename\\n      }\\n      itemId\\n      dataSources\\n      media {\\n        images {\\n          url\\n          type\\n          subType\\n          sizes\\n          __typename\\n        }\\n        __typename\\n      }\\n      pricing(\\n        storeId: $storeId\\n        isBrandPricingPolicyCompliant: $isBrandPricingPolicyCompliant\\n      ) {\\n        value\\n        original\\n        preferredPriceFlag\\n        promotion {\\n          dates {\\n            start\\n            end\\n            __typename\\n          }\\n          description {\\n            shortDesc\\n            longDesc\\n            __typename\\n          }\\n          experienceTag\\n          subExperienceTag\\n          type\\n          dollarOff\\n          percentageOff\\n          promotionTag\\n          savingsCenter\\n          savingsCenterPromos\\n          specialBuySavings\\n          specialBuyDollarOff\\n          specialBuyPercentageOff\\n          __typename\\n        }\\n        conditionalPromotions {\\n          promotionId\\n          skuItemGroup\\n          promotionTags\\n          eligibilityCriteria {\\n            itemGroup\\n            minThresholdVal\\n            thresholdType\\n            __typename\\n          }\\n          reward {\\n            tiers {\\n              minThresholdVal\\n              thresholdType\\n              rewardVal\\n              rewardType\\n              rewardLevel\\n              maxAllowedRewardAmount\\n              __typename\\n            }\\n            __typename\\n          }\\n          __typename\\n        }\\n        alternatePriceDisplay\\n        alternate {\\n          bulk {\\n            pricePerUnit\\n            thresholdQuantity\\n            value\\n            __typename\\n          }\\n          unit {\\n            caseUnitOfMeasure\\n            unitsOriginalPrice\\n            unitsPerCase\\n            value\\n            __typename\\n          }\\n          __typename\\n        }\\n        mapAboveOriginalPrice\\n        mapDetail {\\n          percentageOff\\n          dollarOff\\n          mapPolicy\\n          mapOriginalPriceViolation\\n          mapSpecialPriceViolation\\n          __typename\\n        }\\n        message\\n        specialBuy\\n        unitOfMeasure\\n        clearance {\\n          value\\n          dollarOff\\n          percentageOff\\n          unitsClearancePrice\\n          __typename\\n        }\\n        __typename\\n      }\\n      reviews {\\n        ratingsReviews {\\n          averageRating\\n          totalReviews\\n          __typename\\n        }\\n        __typename\\n      }\\n      badges(storeId: $storeId) {\\n        name\\n        label\\n        __typename\\n      }\\n      dataSource\\n      favoriteDetail @skip(if: $skipFavoriteCount) {\\n        count\\n        __typename\\n      }\\n      taxonomy {\\n        breadCrumbs {\\n          label\\n          __typename\\n        }\\n        __typename\\n      }\\n      details {\\n        installation {\\n          serviceType\\n          __typename\\n        }\\n        collection {\\n          name\\n          url\\n          __typename\\n        }\\n        __typename\\n      }\\n      fulfillment(storeId: $storeId, zipCode: $zipCode) {\\n        anchorStoreStatus\\n        anchorStoreStatusType\\n        backordered\\n        backorderedShipDate\\n        bossExcludedShipStates\\n        excludedShipStates\\n        seasonStatusEligible\\n        fulfillmentOptions {\\n          type\\n          fulfillable\\n          services {\\n            deliveryTimeline\\n            deliveryDates {\\n              startDate\\n              endDate\\n              __typename\\n            }\\n            deliveryCharge\\n            dynamicEta {\\n              hours\\n              minutes\\n              __typename\\n            }\\n            hasFreeShipping\\n            freeDeliveryThreshold\\n            locations {\\n              curbsidePickupFlag\\n              isBuyInStoreCheckNearBy\\n              distance\\n              inventory {\\n                isOutOfStock\\n                isInStock\\n                isLimitedQuantity\\n                isUnavailable\\n                quantity\\n                maxAllowedBopisQty\\n                minAllowedBopisQty\\n                __typename\\n              }\\n              isAnchor\\n              locationId\\n              state\\n              storeName\\n              storePhone\\n              type\\n              __typename\\n            }\\n            type\\n            totalCharge\\n            earliestDeliveryDate\\n            deliveryMessage\\n            __typename\\n          }\\n          __typename\\n        }\\n        onlineStoreStatus\\n        onlineStoreStatusType\\n        fulfillmentBundleMessage\\n        __typename\\n      }\\n      availabilityType {\\n        type\\n        discontinued\\n        buyable\\n        status\\n        __typename\\n      }\\n      bundleFlag\\n      specificationGroup {\\n        specifications {\\n          specName\\n          specValue\\n          __typename\\n        }\\n        specTitle\\n        __typename\\n      }\\n      bundleItems {\\n        id\\n        quantity\\n        __typename\\n      }\\n      __typename\\n    }\\n    id\\n    searchReport {\\n      totalProducts\\n      didYouMean\\n      correctedKeyword\\n      keyword\\n      pageSize\\n      searchUrl\\n      sortBy\\n      sortOrder\\n      startIndex\\n      __typename\\n    }\\n    relatedResults {\\n      universalSearch {\\n        title\\n        __typename\\n      }\\n      relatedServices {\\n        label\\n        __typename\\n      }\\n      visualNavs {\\n        label\\n        imageId\\n        webUrl\\n        categoryId\\n        imageURL\\n        __typename\\n      }\\n      visualNavContainsEvents\\n      relatedKeywords {\\n        keyword\\n        __typename\\n      }\\n      __typename\\n    }\\n    taxonomy {\\n      brandLinkUrl\\n      breadCrumbs {\\n        browseUrl\\n        creativeIconUrl\\n        deselectUrl\\n        dimensionId\\n        dimensionName\\n        label\\n        refinementKey\\n        url\\n        __typename\\n      }\\n      __typename\\n    }\\n    templates\\n    discoveryZones @skip(if: $skipDiscoveryZones) {\\n      products(dataSource: $dataSource) {\\n        itemId\\n        dataSources\\n        badges(storeId: $storeId) {\\n          name\\n          __typename\\n        }\\n        info {\\n          isSponsored\\n          sponsoredMetadata {\\n            campaignId\\n            placementId\\n            slotId\\n            sponsoredId\\n            trackSource\\n            __typename\\n          }\\n          sponsoredBeacon {\\n            onClickBeacon\\n            onViewBeacon\\n            onClickBeacons\\n            onViewBeacons\\n            __typename\\n          }\\n          productSubType {\\n            name\\n            __typename\\n          }\\n          augmentedReality\\n          globalCustomConfigurator {\\n            customExperience\\n            __typename\\n          }\\n          swatches {\\n            isSelected\\n            itemId\\n            label\\n            swatchImgUrl\\n            url\\n            value\\n            __typename\\n          }\\n          totalNumberOfOptions\\n          hidePrice\\n          ecoRebate\\n          quantityLimit\\n          categoryHierarchy\\n          sskMin\\n          sskMax\\n          unitOfMeasureCoverage\\n          wasMaxPriceRange\\n          wasMinPriceRange\\n          __typename\\n        }\\n        identifiers {\\n          canonicalUrl\\n          productType\\n          productLabel\\n          modelNumber\\n          storeSkuNumber\\n          itemId\\n          brandName\\n          parentId\\n          __typename\\n        }\\n        media {\\n          images {\\n            url\\n            type\\n            subType\\n            sizes\\n            __typename\\n          }\\n          __typename\\n        }\\n        dataSource\\n        details {\\n          collection {\\n            name\\n            url\\n            __typename\\n          }\\n          __typename\\n        }\\n        pricing(\\n          storeId: $storeId\\n          isBrandPricingPolicyCompliant: $isBrandPricingPolicyCompliant\\n        ) {\\n          alternatePriceDisplay\\n          alternate {\\n            bulk {\\n              pricePerUnit\\n              thresholdQuantity\\n              value\\n              __typename\\n            }\\n            unit {\\n              caseUnitOfMeasure\\n              unitsOriginalPrice\\n              unitsPerCase\\n              value\\n              __typename\\n            }\\n            __typename\\n          }\\n          original\\n          mapAboveOriginalPrice\\n          mapDetail {\\n            percentageOff\\n            dollarOff\\n            mapPolicy\\n            mapOriginalPriceViolation\\n            mapSpecialPriceViolation\\n            __typename\\n          }\\n          message\\n          preferredPriceFlag\\n          promotion {\\n            type\\n            description {\\n              shortDesc\\n              longDesc\\n              __typename\\n            }\\n            dollarOff\\n            percentageOff\\n            promotionTag\\n            savingsCenter\\n            savingsCenterPromos\\n            specialBuySavings\\n            specialBuyDollarOff\\n            specialBuyPercentageOff\\n            __typename\\n          }\\n          specialBuy\\n          unitOfMeasure\\n          value\\n          __typename\\n        }\\n        taxonomy {\\n          breadCrumbs {\\n            label\\n            __typename\\n          }\\n          __typename\\n        }\\n        reviews {\\n          ratingsReviews {\\n            averageRating\\n            totalReviews\\n            __typename\\n          }\\n          __typename\\n        }\\n        __typename\\n      }\\n      metadata {\\n        zone\\n        zoneTitle\\n        __typename\\n      }\\n      __typename\\n    }\\n    partialTemplates\\n    dimensions {\\n      label\\n      refinements {\\n        refinementKey\\n        url\\n        label\\n        recordCount\\n        selected\\n        imgUrl\\n        nestedRefinements {\\n          label\\n          url\\n          recordCount\\n          refinementKey\\n          __typename\\n        }\\n        __typename\\n      }\\n      collapse\\n      dimensionId\\n      isVisualNav\\n      isVisualDimension\\n      isNumericFilter\\n      isColorSwatch\\n      nestedRefinementsLimit\\n      visualNavSequence\\n      __typename\\n    }\\n    orangeGraph {\\n      universalSearchArray {\\n        pods {\\n          title\\n          description\\n          imageUrl\\n          link\\n          isProContent\\n          recordType\\n          __typename\\n        }\\n        info {\\n          title\\n          __typename\\n        }\\n        __typename\\n      }\\n      productTypes\\n      intents\\n      orderNumber\\n      __typename\\n    }\\n    appliedDimensions {\\n      label\\n      refinements {\\n        label\\n        refinementKey\\n        url\\n        __typename\\n      }\\n      isNumericFilter\\n      __typename\\n    }\\n    primaryFilters {\\n      collapse\\n      dimensionId\\n      isVisualNav\\n      isVisualDimension\\n      isNumericFilter\\n      isColorSwatch\\n      label\\n      nestedRefinementsLimit\\n      refinements {\\n        label\\n        refinementKey\\n        recordCount\\n        selected\\n        imgUrl\\n        url\\n        nestedRefinements {\\n          label\\n          url\\n          recordCount\\n          refinementKey\\n          __typename\\n        }\\n        __typename\\n      }\\n      visualNavSequence\\n      __typename\\n    }\\n    buyitagain(dataSource: $dataSource) @skip(if: $skipBuyitagain) {\\n      itemId\\n      dataSources\\n      badges(storeId: $storeId) {\\n        name\\n        __typename\\n      }\\n      info {\\n        isSponsored\\n        sponsoredMetadata {\\n          campaignId\\n          placementId\\n          slotId\\n          sponsoredId\\n          trackSource\\n          __typename\\n        }\\n        sponsoredBeacon {\\n          onClickBeacon\\n          onViewBeacon\\n          onClickBeacons\\n          onViewBeacons\\n          __typename\\n        }\\n        productSubType {\\n          name\\n          link\\n          __typename\\n        }\\n        augmentedReality\\n        globalCustomConfigurator {\\n          customExperience\\n          __typename\\n        }\\n        customerSignal {\\n          previouslyPurchased\\n          __typename\\n        }\\n        isBuryProduct\\n        isGenericProduct\\n        returnable\\n        hidePrice\\n        ecoRebate\\n        quantityLimit\\n        categoryHierarchy\\n        sskMin\\n        sskMax\\n        unitOfMeasureCoverage\\n        wasMaxPriceRange\\n        wasMinPriceRange\\n        __typename\\n      }\\n      identifiers {\\n        canonicalUrl\\n        productType\\n        productLabel\\n        modelNumber\\n        storeSkuNumber\\n        itemId\\n        brandName\\n        specialOrderSku\\n        __typename\\n      }\\n      media {\\n        images {\\n          url\\n          type\\n          subType\\n          sizes\\n          __typename\\n        }\\n        __typename\\n      }\\n      details {\\n        installation {\\n          serviceType\\n          __typename\\n        }\\n        collection {\\n          name\\n          url\\n          __typename\\n        }\\n        __typename\\n      }\\n      fulfillment(storeId: $storeId, zipCode: $zipCode) {\\n        anchorStoreStatus\\n        anchorStoreStatusType\\n        backordered\\n        backorderedShipDate\\n        bossExcludedShipStates\\n        excludedShipStates\\n        seasonStatusEligible\\n        fulfillmentOptions {\\n          type\\n          fulfillable\\n          services {\\n            deliveryTimeline\\n            deliveryDates {\\n              startDate\\n              endDate\\n              __typename\\n            }\\n            deliveryCharge\\n            dynamicEta {\\n              hours\\n              minutes\\n              __typename\\n            }\\n            hasFreeShipping\\n            freeDeliveryThreshold\\n            locations {\\n              curbsidePickupFlag\\n              isBuyInStoreCheckNearBy\\n              distance\\n              inventory {\\n                isOutOfStock\\n                isInStock\\n                isLimitedQuantity\\n                isUnavailable\\n                quantity\\n                maxAllowedBopisQty\\n                minAllowedBopisQty\\n                __typename\\n              }\\n              isAnchor\\n              locationId\\n              state\\n              storeName\\n              storePhone\\n              type\\n              __typename\\n            }\\n            type\\n            totalCharge\\n            __typename\\n          }\\n          __typename\\n        }\\n        onlineStoreStatus\\n        onlineStoreStatusType\\n        __typename\\n      }\\n      installServices(storeId: $storeId, zipCode: $zipCode) @skip(if: $skipInstallServices) {\\n        scheduleAMeasure\\n        gccCarpetDesignAndOrderEligible\\n        __typename\\n      }\\n      taxonomy {\\n        breadCrumbs {\\n          label\\n          __typename\\n        }\\n        __typename\\n      }\\n      pricing(\\n        storeId: $storeId\\n        isBrandPricingPolicyCompliant: $isBrandPricingPolicyCompliant\\n      ) {\\n        alternatePriceDisplay\\n        alternate {\\n          bulk {\\n            pricePerUnit\\n            thresholdQuantity\\n            value\\n            __typename\\n          }\\n          unit {\\n            caseUnitOfMeasure\\n            unitsOriginalPrice\\n            unitsPerCase\\n            value\\n            __typename\\n          }\\n          __typename\\n        }\\n        original\\n        mapAboveOriginalPrice\\n        mapDetail {\\n          percentageOff\\n          dollarOff\\n          mapPolicy\\n          mapOriginalPriceViolation\\n          mapSpecialPriceViolation\\n          __typename\\n        }\\n        message\\n        preferredPriceFlag\\n        promotion {\\n          type\\n          description {\\n            shortDesc\\n            longDesc\\n            __typename\\n          }\\n          dollarOff\\n          percentageOff\\n          promotionTag\\n          savingsCenter\\n          savingsCenterPromos\\n          specialBuySavings\\n          specialBuyDollarOff\\n          specialBuyPercentageOff\\n          __typename\\n        }\\n        specialBuy\\n        unitOfMeasure\\n        value\\n        __typename\\n      }\\n      dataSource\\n      __typename\\n    }\\n    __typename\\n  }\\n}"}',
        method: "POST",
        mode: "cors",
        credentials: "include",
      }
    );
    if (!response.ok) {
      throw new Error(`Response status: ${response.status}`);
    }

    const json = await response.json();
    if (json.data.searchModel) {
      for (const value of json.data.searchModel.products) {
        if (!value.info.isSponsored) {
          if (value.pricing) {
            if (value.pricing.clearance) {
              if (
                value.pricing.clearance.percentageOff > 39 &&
                value.fulfillment.fulfillmentOptions[0].services[0].locations[0]
                  .inventory.quantity != 0
              ) {
                //           console.log("");
                //  //         console.log("Store:"+json.data.searchModel.metadata.stores.storeId + "-"+json.data.searchModel.metadata.stores.storeName );
                //           console.log("Item Brand: "+value.identifiers.brandName);
                //           console.log("Item Name: "+value.identifiers.productLabel);
                //           console.log("Model Number: "+value.identifiers.modelNumber);
                //           console.log("Store SKU Number: "+value.identifiers.storeSkuNumber);
                //           console.log("Regular Price: $"+value.pricing.value);
                //           console.log("Clearance Price: $"+value.pricing.clearance.value);
                //           console.log("Quantity: "+value.fulfillment.fulfillmentOptions[0].services[0].locations[0].inventory.quantity);
                //           console.log("");

                const data = {
                  StoreID: json.data.searchModel.metadata.stores.storeId,
                  StoreName: json.data.searchModel.metadata.stores.storeName,
                  ItemBrand: value.identifiers.brandName,
                  ItemName: value.identifiers.productLabel,
                  ModelNumber: value.identifiers.modelNumber,
                  StoreSKUNumber: value.identifiers.storeSkuNumber,
                  RegularPrice: value.pricing.value,
                  ClearancePrice: value.pricing.clearance.value,
                  Quantity:
                    value.fulfillment.fulfillmentOptions[0].services[0]
                      .locations[0].inventory.quantity,
                };

                const jsonResponse = JSON.stringify(data);
                console.log(jsonResponse);
              }
            }
          }
        }
      }

      const pgsize = await json.data.searchModel.searchReport.pageSize;
      if (pgsize > 0) {
        idx = idx + pgsize;
        await getData1(stre, idx);
      }
    }
  } catch (error) {
    console.error(error.message);
  }
}

async function sd() {
  try {
    console.log("");
    console.log("LIT");
    // var loc=[1401];
    var loc = [1401, 1402, 8919, 1412, 1407, 1405];
    for (const value of loc) {
      await getData(value, 0);
      await getData1(value, 0);
    }
    var loc1 = [1403, 8445, 1404];
    console.log("");
    console.log("NWA");
    for (const value of loc1) {
      await getData(value, 0);
      await getData1(value, 0);
    }

    console.log("");
    console.log("MEM");
    var loc2 = [729, 704, 725, 703, 737, 8469, 8916, 2903, 779];
    for (const value of loc2) {
      await getData(value, 0);
      await getData1(value, 0);
    }
  } catch (error) {
    console.error(error.message);
  }
}

//  getData(1401,0);  getData1(1401,0);
//  getData(1402,0);  getData1(1402,0);
//   getData(8919,0); getData1(8919,0);
//    getData(1412,0); getData1(1412,0);
//    getData(1407,0); getData1(1407,0);
//    getData(1405,0); getData1(1405,0);

//Memphis
//    getData(8916,0);   getData1(8916,0);
//   getData(703,0);   getData1(703,0);
//    getData(737,0);   getData1(737,0);
//    getData(725,0);   getData1(725,0);
//    getData(2903,0);   getData1(2903,0);
//    getData(704,0);   getData1(704,0);
